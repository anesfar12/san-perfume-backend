// schema.prisma

// User model
model User {
  id                Int      @id @default(autoincrement())
  email             String   @unique
  password          String
  name              String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  orders            Order[]
  address           Address[]
  wishlists         WishlistItem[]
  compareSessions    CompareSession[]
  refreshTokens     RefreshToken[]
}

// Product model
model Product {
  id                Int        @id @default(autoincrement())
  name              String
  description       String?
  price             Float
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
  variants          ProductVariant[]
  images            ProductImage[]
  categories        Category[]  @relation("ProductCategories")
  tags              ProductTagOnProduct[]
}

// ProductVariant model
model ProductVariant {
  id                Int        @id @default(autoincrement())
  productId        Int
  name              String
  price             Float
  stock             Int
  product          Product     @relation(fields: [productId], references: [id])
}

// ProductImage model
model ProductImage {
  id                Int        @id @default(autoincrement())
  productId        Int
  url               String
  product          Product     @relation(fields: [productId], references: [id])
}

// Category model
model Category {
  id                Int        @id @default(autoincrement())
  name              String
  products          Product[]   @relation("ProductCategories")
}

// Collection model
model Collection {
  id                Int        @id @default(autoincrement())
  name              String
  products          CollectionProduct[]
}

// CollectionProduct model
model CollectionProduct {
  id                Int        @id @default(autoincrement())
  collectionId     Int
  productId        Int
  collection       Collection  @relation(fields: [collectionId], references: [id])
  product          Product     @relation(fields: [productId], references: [id])
}

// ProductTag model
model ProductTag {
  id                Int        @id @default(autoincrement())
  name              String
  products          ProductTagOnProduct[]
}

// ProductTagOnProduct model
model ProductTagOnProduct {
  id                Int        @id @default(autoincrement())
  productId        Int
  productTagId     Int
  product          Product     @relation(fields: [productId], references: [id])
  tag              ProductTag  @relation(fields: [productTagId], references: [id])
}

// Order model
model Order {
  id                Int      @id @default(autoincrement())
  userId            Int
  status            String
  totalAmount       Float
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  items             OrderItem[]
  user              User      @relation(fields: [userId], references: [id])
}

// OrderItem model
model OrderItem {
  id                Int      @id @default(autoincrement())
  orderId          Int
  productId        Int
  quantity         Int
  order            Order     @relation(fields: [orderId], references: [id])
  product          Product   @relation(fields: [productId], references: [id])
}

// OrderStatusHistory model
model OrderStatusHistory {
  id                Int      @id @default(autoincrement())
  orderId          Int
  status           String
  updatedAt        DateTime @default(now())
  order            Order     @relation(fields: [orderId], references: [id])
}

// Coupon model
model Coupon {
  id                Int      @id @default(autoincrement())
  code              String    @unique
  discountAmount    Float
  expirationDate    DateTime
  appliedCoupons    AppliedCouponOnOrder[]
}

// AppliedCouponOnOrder model
model AppliedCouponOnOrder {
  id                Int      @id @default(autoincrement())
  orderId          Int
  couponId         Int
  order            Order     @relation(fields: [orderId], references: [id])
  coupon           Coupon    @relation(fields: [couponId], references: [id])
}

// Page model
model Page {
  id                Int      @id @default(autoincrement())
  title             String
  content           String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

// BlogPost model
model BlogPost {
  id                Int      @id @default(autoincrement())
  title             String
  content           String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

// Address model
model Address {
  id                Int      @id @default(autoincrement())
  userId           Int
  street            String
  city              String
  state             String
  zip               String
  user             User      @relation(fields: [userId], references: [id])
}

// WishlistItem model
model WishlistItem {
  id                Int      @id @default(autoincrement())
  userId           Int
  productId        Int
  user             User      @relation(fields: [userId], references: [id])
  product          Product   @relation(fields: [productId], references: [id])
}

// CompareSession model
model CompareSession {
  id                Int      @id @default(autoincrement())
  userId           Int
  items            CompareItem[]
  user             User      @relation(fields: [userId], references: [id])
}

// CompareItem model
model CompareItem {
  id                Int      @id @default(autoincrement())
  compareSessionId Int
  productId        Int
  compareSession    CompareSession @relation(fields: [compareSessionId], references: [id])
  product          Product   @relation(fields: [productId], references: [id])
}

// ScentQuizAnswer model
model ScentQuizAnswer {
  id                Int      @id @default(autoincrement())
  userId           Int
  answer            String
  user             User      @relation(fields: [userId], references: [id])
}

// RefreshToken model
model RefreshToken {
  id                Int      @id @default(autoincrement())
  userId           Int
  token             String
  createdAt         DateTime @default(now())
  user             User      @relation(fields: [userId], references: [id])
}

// ShippingRule model
model ShippingRule {
  id                Int      @id @default(autoincrement())
  ruleDescription   String
  cost              Float
}

// PaymentGatewayConfig model
model PaymentGatewayConfig {
  id                Int      @id @default(autoincrement())
  gatewayName       String
  apiKey            String
  apiSecret         String
}

// LocalizationSetting model
model LocalizationSetting {
  id                Int      @id @default(autoincrement())
  language          String
  currency          String
}